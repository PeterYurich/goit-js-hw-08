{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SCDA,MASMC,EAAuBC,IACzB,IACI,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CAC3D,MAAOM,GACLC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GDL3CC,EAAOC,SAASC,cAAc,mBAGpC,WAAsB,MAAMC,EAAcd,EAJjB,uBAKrBc,GACAC,OAAOC,QAAQF,GAAaG,SAAQ,EAAEC,EAAMC,MACxCR,EAAKS,SAASF,GAAMC,MAAQA,CAAK,G,CAJzCE,GAcAV,EAAKW,iBAAiB,QAASxB,EAAAyB,EAAEC,UANdC,IACf,IAAIX,EAAcd,EAZG,uBAarBc,EAAcA,GAA4B,GAC1CA,EAAYW,EAAEC,OAAOR,MAAQO,EAAEC,OAAOP,MACtChB,aAAawB,QAfQ,sBAekBrB,KAAKsB,UAAUd,GAAa,GAElB,MAErDH,EAAKW,iBAAiB,UAAUG,IAC5BA,EAAEI,iBACF,MAAMf,EAAcd,EArBC,uBAsBjBc,GACAL,QAAQqB,IAAIhB,GACZC,OAAOgB,KAAKjB,GAAaG,SAAQe,IAC7BrB,EAAKS,SAASY,GAAIb,MAAQ,EAAE,IAEhChB,aAAa8B,WA3BI,wBA4BZxB,QAAQqB,IAAI,6DAA6D","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["\nimport { _ } from \"lodash\"\nimport  {\n    saveToLocalStorage,\n    loadFromLocalStorage,\n    removeFromLocalStorage\n} from \"./storage\"\n\nconst lOCALSTORAGE_KEY = 'feedback-form-state'\nconst form = document.querySelector('.feedback-form')\n\ninitForm()\nfunction initForm () {const enteredData = loadFromLocalStorage(lOCALSTORAGE_KEY)\nif (enteredData) {\n    Object.entries(enteredData).forEach(([name, value]) => {\n        form.elements[name].value = value\n    })\n}}\n\nconst onTapping = (e) => {\n    let enteredData = loadFromLocalStorage(lOCALSTORAGE_KEY)\n    enteredData = enteredData ? enteredData : {}\n    enteredData[e.target.name] = e.target.value\n    localStorage.setItem(lOCALSTORAGE_KEY, JSON.stringify(enteredData))\n}\nform.addEventListener('input', _.throttle(onTapping, 500))\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n    const enteredData = loadFromLocalStorage(lOCALSTORAGE_KEY)\n    if (enteredData) {\n        console.log(enteredData)\n        Object.keys(enteredData).forEach(el => {\n            form.elements[el].value = \"\"\n        })\n        localStorage.removeItem(lOCALSTORAGE_KEY)\n    } else { console.log(\"object 'feedback-form-state' in storage is already removed\") }\n})\n\n","const saveToLocalStorage = (key, value) => {\n    try {\n        const serializedState = JSON.stringify(value);\n        localStorage.setItem(key, serializedState);\n    } catch (error) {\n        console.error(\"Set state error: \", error.message);\n    }\n};\n\nconst loadFromLocalStorage = key => {\n    try {\n        const serializedState = localStorage.getItem(key);\n        return serializedState === null ? undefined : JSON.parse(serializedState);\n    } catch (error) {\n        console.error(\"Get state error: \", error.message);\n    }\n};\n\nconst removeFromLocalStorage = key => {\n    const storageData = localStorage.getItem(key);\n    if (!storageData) {\n        console.log(`Local storage hasn't a key ${key}`)\n    return}\n    localStorage.removeItem(key);\n}\n\nexport {\n    saveToLocalStorage,\n    loadFromLocalStorage,\n    removeFromLocalStorage\n};\n\n"],"names":["$kEUo3","parcelRequire","$3fff5e8daf4b13a6$export$e68c847c0bceb7d5","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$945622fd0f572e60$var$form","document","querySelector","enteredData","Object","entries","forEach","name","value","elements","$945622fd0f572e60$var$initForm","addEventListener","_","throttle","e","target","setItem","stringify","preventDefault","log","keys","el","removeItem"],"version":3,"file":"03-feedback.781c0ada.js.map"}